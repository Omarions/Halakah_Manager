<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html xmlns:th="http://www.thymeleaf.org">
<head>
</head>
<body>
<div th:fragment="sidebarnav">
    <!-- Left side column. contains the logo and sidebar -->
    <aside class="main-sidebar">

        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">

            <!-- Sidebar user panel (optional) -->
            <div class="user-panel">
                <div class="pull-right image">
                    <img src="../../lib/dist/img/user/user2-160x160.jpg"
                         th:src="@{'/lib/dist/img/user/' + ${#httpSession.getAttribute('user')?.photo}}"
                         class="img-circle" alt="User Image"/>
                </div>
                <div class="pull-left info">
                    <p th:text="${#httpSession.getAttribute('user')?.name}">عمر فوزي</p>
                    <!-- Status -->
                    <a href="#" th:class="${#httpSession.getAttribute('user')?.status}"><i
                            class="fa fa-circle text-success"></i>
                        Online</a>
                    <a href="#" th:unless="${#httpSession.getAttribute('user')?.status}"><i
                            class="fa fa-circle text-danger"></i>
                        Offline</a>
                </div>
            </div>

            <!-- search form (Optional) -->
            <form action="#" method="get" class="sidebar-form">
                <div class="input-group">
                    <input type="text" name="q" class="form-control" placeholder="بحث..."/>
		              <span class="input-group-btn">
		                <button type="submit" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i>
		                </button>
		              </span>
                </div>
            </form>
            <!-- /.search form -->

            <!-- Sidebar Menu -->
	        <ul class="sidebar-menu" data-widget="tree">
		        <li class="header">القائمة الرئيسية</li>
                <!-- Optionally, you can add icons to the links -->

                <!-- activity menu-tree -->
                <li class="treeview">
                    <a href="#">
                        <i class="fa fa-list"></i><span>الأنشطة</span>
                        <span class="pull-left-container">
                            <i class="fa fa-angle-left pull-left"></i>
                            <span class="label label-primary pull-left" th:text="${activeActivitiesCount}">4</span>
                         </span>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="#" th:href="@{/admin/activities}"><i class="fa fa-list-ul"></i> List</a></li>
                        <li><a href="#" th:href="@{/admin/activities/activity}"><i class="fa fa-plus-square"></i>
                            New</a></li>
                        <li><a href="#"><i class="fa fa-pie-chart"></i> Chart</a></li>
                    </ul>
                </li>

                <!-- course menu-tree -->
                <li class="treeview">
                    <a href="#">
                        <i class="fa fa-university" aria-hidden="true"></i> <span>المجموعات</span>
                        <span class="pull-left-container">
                            <i class="fa fa-angle-left pull-left"></i>
                            <span class="label label-primary pull-left"
                                  th:text="${activeCoursesCount}">4</span>
                        </span>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="#" th:href="@{/admin/courses}"><i class="fa fa-list-ul"></i> List</a></li>
                        <li><a href="#" th:href="@{/admin/courses/course}"><i class="fa fa-plus-square"></i> New</a>
                        </li>
                        <li><a href="#"><i class="fa fa-pie-chart"></i> Chart</a></li>
                    </ul>
                </li>

                <!-- certificate menu-tree -->
                <li class="treeview">
                    <a href="#"><i class="fa fa-certificate"
                                   aria-hidden="true"></i>
                        <span>الإجازات</span>
                        <span class="pull-left-container">
                            <i class="fa fa-angle-left pull-left"></i>
                            <span class="label label-primary pull-left"
                                  th:text="${certificatesCount}">4</span>
                        </span>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="#" th:href="@{/admin/certificates}"><i class="fa fa-flag"
                                                                            aria-hidden="true"></i>
                            <span>list</span></a>
                        </li>
                    </ul>
                </li>

                <!-- student menu-tree -->
                <li class="treeview">
                    <a href="#">
                        <i class="fa fa-graduation-cap" aria-hidden="true"></i> <span>الطلبة</span>
                        <span class="pull-left-container">
                            <i class="fa fa-angle-left pull-left"></i>
                            <span class="label label-primary pull-left"
                                  th:text="${activeStudentsCount}">12</span>
                            <!-- total wait
						<small class="label pull-right bg-yellow" th:text="${application.waitStudentsCount}">16</small>
						<!-- total certified
						<small class="label pull-right bg-green" th:text="${application.certifiedStudentsCount}">5</small>
						-->
                        </span>
                    </a>

                    <ul class="treeview-menu">
                        <li><a href="#" th:href="@{/admin/students}"><i class="fa fa-list-ul"></i> List</a></li>
                        <li><a href="#" th:href="@{/admin/students/student}"><i class="fa fa-plus-square"></i> New</a>
                        </li>
                        <li><a href="#"><i class="fa fa-pie-chart"></i> Chart</a></li>
                    </ul>
                </li>

                <!-- teacher menu-tree -->
                <li class="treeview">
                    <a href="#"><i class="fa fa-users" aria-hidden="true"></i> <span>المدرسين</span>
                        <span class="pull-left-container">
                            <i class="fa fa-angle-left pull-left"></i>
                            <span class="label label-primary pull-left"
                                      th:text="${activeTeachersCount}">4</span>
                            </span>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="#" th:href="@{/admin/teachers}"><i class="fa fa-list-ul"></i> List</a></li>
                        <li><a href="#" th:href="@{/admin/teachers/teacher}"><i class="fa fa-plus-square"></i> New</a>
                        </li>
                        <li><a href="#"><i class="fa fa-pie-chart"></i> Chart</a></li>
                    </ul>
                </li>

                <!-- event menu-tree -->
                <li class="treeview">
                    <a href="#"><i class="fa fa-users" aria-hidden="true"></i> <span>الحفلات</span>
                        <span class="pull-left-container">
                            <i class="fa fa-angle-left pull-left"></i>
                            <span class="label label-primary pull-left"
                                      th:text="${eventsCount}">4</span>
                            </span>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="#" th:href="@{/admin/events}"><i class="fa fa-list-ul"></i> List</a></li>
                        <li><a href="#" th:href="@{/admin/events/event}"><i class="fa fa-plus-square"></i> New</a>
                        </li>
                        <li><a href="#"><i class="fa fa-pie-chart"></i> Chart</a></li>
                    </ul>
                </li>

                <!-- countries menu-tree -->
                <li><a href="#" th:href="@{/admin/report}"><i class="fa  fa-print" aria-hidden="true"></i><span>التقرير العام للحلقة</span>
                </a></li>

                <!-- archive menu-tree -->
                <li class="treeview">
                    <a href="#"><i class="fa fa-archive" aria-hidden="true"></i> <span>الأرشيف</span>
                    <span class="pull-left-container">
                        <i class="fa fa-angle-left pull-left"></i>
                    </span>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="#" th:href="@{/admin/archive/activities}"><i class="fa fa-list"></i>
                            <span>الأنشطة</span>
                            <span class="pull-left-container">
                            <span class="label label-primary pull-left"
                                      th:text="${archivedActivitiesCount}">4</span>
                            </span>
                        </a></li>
                        <li><a href="#" th:href="@{/admin/archive/teachers}"><i class="fa fa-users"
                                                                                aria-hidden="true"></i>
                            <span>المدرسين</span>
                            <span class="pull-left-container">
                            <span class="label label-primary pull-left"
                                      th:text="${archivedTeachersCount}">4</span>
                            </span>
                        </a>
                        </li>
                        <li><a href="#" th:href="@{/admin/archive/students}"><i class="fa fa-graduation-cap"
                                                                                aria-hidden="true"></i>
                            <span>الطلبة</span>
                            <span class="pull-left-container">
                            <span class="label label-primary pull-left"
                                      th:text="${archivedStudentsCount}">4</span>
                            </span>
                        </a></li>
                        <li><a href="#" th:href="@{/admin/archive/courses}"><i class="fa fa-university"
                                                                               aria-hidden="true"></i>
                            <span>المجموعات</span>
                            <span class="pull-left-container">
                            <span class="label label-primary pull-left"
                                      th:text="${archivedCoursesCount}">4</span>
                            </span>
                        </a></li>
                    </ul>
                </li>
            </ul>
            <!-- /.sidebar-menu -->
        </section>
        <!-- /.sidebar -->
    </aside>
</div>
<script>
    //Variable to save new status of the user
    var user_status;
    //assign update status of the user to the click event of the button_online
    $('#button_online').click(function (e) {
        user_status = 'online';
        updateStatus(userEmail, user_status);
    });
    //assign update status of the user to the click event of the button_offline
    $('#button_offline').click(function (event) {
        user_status = 'offline';
        updateStatus(userEmail, user_status);
    });
    function updateStatus(uEmail, newStatus) {
        $.ajax({
            url: "/admin/user/updateStatus",
            type: "GET",
            data: {
                email: uEmail,
                userStatus: newStatus
            },
            dataType: "html",
            success: function (data) {
                location.reload();
            }
        });
    }


</script>
</body>
</html>
